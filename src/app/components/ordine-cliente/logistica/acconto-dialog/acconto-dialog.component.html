<div mat-dialog-title>
  Sono presenti i seguenti acconti per gli ordini selezionati. Vuoi usarli?
</div>

<div class="row dialog-body">
  <div class="col-lg-12 col-md-12 col-sm-12 dialog-content">
    <section class="box acconti-container mat-elevation-z8" tabindex="0">
      <mat-spinner *ngIf="loader" class="loader"></mat-spinner>

      <!-- wrapper scrollabile solo per la tabella -->
      <div class="table-wrapper" *ngIf="!loader">
        <table class="table-container" mat-table multiTemplateDataRows [dataSource]="acconti">
          <!-- Checkbox Column -->
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
              <mat-checkbox color="primary"
                            (change)="$event ? toggleAllRows() : null"
                            [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="selection.hasValue() && !isAllSelected()">
              </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row">
              <mat-checkbox color="primary"
                            (click)="$event.stopPropagation();"
                            (change)="$event ? selection.toggle(row) : null"
                            [checked]="selection.isSelected(row)">
              </mat-checkbox>
            </td>
          </ng-container>

          <!-- Data Fattura -->
          <ng-container matColumnDef="dataFattura">
            <th mat-header-cell *matHeaderCellDef>Data Fattura</th>
            <td mat-cell *matCellDef="let fattura">
              <span>{{fattura.dataFattura | date:'dd/MM/yyyy'}}</span>
            </td>
          </ng-container>

          <!-- Numero Fattura -->
          <ng-container matColumnDef="numeroFattura">
            <th mat-header-cell *matHeaderCellDef>Numero Fattura</th>
            <td mat-cell *matCellDef="let fattura">
              {{fattura.numeroFattura}}
            </td>
          </ng-container>

          <!-- Rif. Ord. Cliente -->
          <ng-container matColumnDef="rifOrdCliente">
            <th mat-header-cell *matHeaderCellDef>Rif. Ord. Cliente</th>
            <td mat-cell *matCellDef="let fattura">
              {{fattura.rifOrdCliente}}
            </td>
          </ng-container>

          <!-- Movimento -->
          <ng-container matColumnDef="operazione">
            <th mat-header-cell *matHeaderCellDef>Movimento</th>
            <td mat-cell *matCellDef="let fattura">{{fattura.operazione}}</td>
          </ng-container>

          <!-- Prezzo -->
          <ng-container matColumnDef="prezzoAcconto">
            <th mat-header-cell *matHeaderCellDef>Prezzo</th>
            <td mat-cell *matCellDef="let fattura">
              {{fattura.importoResiduo | currency:'EUR':'symbol'}}
            </td>
          </ng-container>

          <!-- IVA -->
          <ng-container matColumnDef="iva">
            <th mat-header-cell *matHeaderCellDef>Iva</th>
            <td mat-cell *matCellDef="let fattura">
              {{fattura.iva}}<span *ngIf="fattura.iva">%</span>
            </td>
          </ng-container>

          <!-- Header + Righe -->
          <tr mat-header-row *matHeaderRowDef="columnAcconti"></tr>
          <tr mat-row *matRowDef="let row; columns: columnAcconti;"></tr>

          <!-- Nessun dato -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell no-result-list" colspan="4">
              Nessun acconto trovato per questo cliente
            </td>
          </tr>
        </table>
      </div>
    </section>

    <div mat-dialog-actions align="end">
      <button mat-raised-button (click)="onAnnullaClick()">Annulla</button>
      <button mat-raised-button (click)="onNoClick()">No</button>
      <button [disabled]="selection.isEmpty()" mat-raised-button color="primary" (click)="aggiungi()">Aggiungi</button>
    </div>
  </div>
</div>
