<mat-toolbar color="primary" class="app-toolbar">

  <!-- Titolo -->
  <span class="toolbar-title">Gestione ordini</span>

  <span class="spacer"></span>

  <!-- MENU PRINCIPALE (SOTTOMENU) -->
  <button *ngIf="perm.canViewOrdiniClienti" mat-button [routerLink]="['/ordini-clienti']">Ordine Clienti</button>

  <button *ngIf="perm.canViewOrdiniFornitori"
          mat-button
          [matMenuTriggerFor]="fornitori">
    Ordine Fornitori
  </button>
  <mat-menu #fornitori="matMenu">
    <button mat-menu-item [routerLink]="['/ordini-fornitore','F']">Sospesi</button>
    <button mat-menu-item [routerLink]="['/ordini-fornitore','T']">Da approvare</button>
    <button mat-menu-item [routerLink]="['/ordini-fornitore']">Approvati</button>
  </mat-menu>

  <button mat-button [matMenuTriggerFor]="logistica">Logistica</button>
  <mat-menu #logistica="matMenu">
    <button mat-menu-item [routerLink]="['/ordini-clienti']">Pronto consegna</button>
    <button mat-menu-item [routerLink]="['/logistica-ordini']">Gestione consegne</button>
    <button mat-menu-item [routerLink]="['/consegne-settimanali']">Consegne settimanali</button>
  </mat-menu>

  <button *ngIf="perm.canViewAnalisi"
          mat-button
          [matMenuTriggerFor]="analisi">
    Analisi dati
  </button>
  <mat-menu #analisi="matMenu">
    <button mat-menu-item [routerLink]="['/riserve']">Riservato Magazzino</button>
    <button *ngIf="perm.canViewSituazioneOrdini"
            mat-menu-item
            [routerLink]="['/oaf-monitor']">
      Situazione ordini
    </button>
  </mat-menu>

  <button mat-button [routerLink]="['/box-doccia']">Box doccia</button>

  <!-- Contabilità -->
  <button *ngIf="perm.canViewContabilita"
          mat-button
          [matMenuTriggerFor]="contabilita">
    Contabilità
  </button>

  <mat-menu #contabilita="matMenu">
    <button mat-menu-item [matMenuTriggerFor]="trading">Trading</button>
    <button mat-menu-item [matMenuTriggerFor]="ostuni">Ostuni</button>
    <button mat-menu-item [matMenuTriggerFor]="ceglie">Ceglie</button>
  </mat-menu>

  <mat-menu #trading="matMenu">
    <button mat-menu-item [routerLink]="['/t/ammortamenti']">Registro cespiti</button>
    <button mat-menu-item [routerLink]="['/t/cespiti']">Cespiti</button>
    <button mat-menu-item [routerLink]="['/t/primanota']">Primanota</button>
    <button mat-menu-item [routerLink]="['/t/tipo-cespiti']">Tipo cespiti</button>
<!--    <button mat-menu-item [routerLink]="['/t/bilancio']">Bilancio</button>-->
  </mat-menu>

  <mat-menu #ostuni="matMenu">
    <button mat-menu-item [routerLink]="['/o/ammortamenti']">Registro cespiti</button>
    <button mat-menu-item [routerLink]="['/o/cespiti']">Cespiti</button>
    <button mat-menu-item [routerLink]="['/o/primanota']">Primanota</button>
    <button mat-menu-item [routerLink]="['/o/tipo-cespiti']">Tipo cespiti</button>
<!--    <button mat-menu-item [routerLink]="['/o/bilancio']">Bilancio</button>-->
  </mat-menu>

  <mat-menu #ceglie="matMenu">
    <button mat-menu-item [routerLink]="['/c/ammortamenti']">Registro cespiti</button>
    <button mat-menu-item [routerLink]="['/c/cespiti']">Cespiti</button>
    <button mat-menu-item [routerLink]="['/c/primanota']">Primanota</button>
    <button mat-menu-item [routerLink]="['/c/tipo-cespiti']">Tipo cespiti</button>
<!--    <button mat-menu-item [routerLink]="['/c/bilancio']">Bilancio</button>-->
  </mat-menu>


  <!-- MENU UTENTE A DESTRA -->
  <button mat-button [matMenuTriggerFor]="userMenu" class="avatar-btn">
    <div class="avatar">{{ avatarLetter }}</div>
  </button>

  <mat-menu #userMenu="matMenu">
    <div class="user-header">
      <div class="username">{{ username }}</div>
      <div class="role">{{ mainRole }}</div>
    </div>

    <mat-divider></mat-divider>

    <button *ngIf="perm.canViewUsers" mat-menu-item [routerLink]="['/users']">
      <mat-icon>person</mat-icon>
      <span>Gestisci dipendenti</span>
    </button>

    <button *ngIf="perm.canViewRoles" mat-menu-item [routerLink]="['/role']">
      <mat-icon>manage_accounts</mat-icon>
      <span>Gestisci ruoli</span>
    </button>

    <button *ngIf="perm.canViewRoles" mat-menu-item [routerLink]="['/permissions']">
      <mat-icon>lock</mat-icon>
      <span>Gestisci permessi</span>
    </button>

    <mat-divider></mat-divider>

    <button mat-menu-item (click)="logout()">
      <mat-icon>logout</mat-icon>
      <span>Logout</span>
    </button>

  </mat-menu>

</mat-toolbar>
