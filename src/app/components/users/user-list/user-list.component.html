<div class="page-container">

  <!-- HEADER -->
  <div class="page-header">
    <h2>Dipendenti</h2>
    <button mat-raised-button color="primary" (click)="creaNuovo()">
      Crea nuovo
    </button>
  </div>

  <!-- FILTRI -->
  <div class="filters-row">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Cerca...</mat-label>
      <input matInput (input)="applyFilter()" [(ngModel)]="filtro.searchText">

      <button *ngIf="filtro.searchText"
              matSuffix
              mat-icon-button
              aria-label="Clear"
              (click)="clearSearch()">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <!-- TABELLA -->
  <div class="table-wrapper mat-elevation-z8">
    <mat-spinner *ngIf="loader" class="loader"></mat-spinner>

    <table *ngIf="!loader" mat-table [dataSource]="dataSource">

      <!-- Username -->
      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>Username</th>
        <td mat-cell *matCellDef="let d">{{ d.username }}</td>
      </ng-container>

      <!-- Nome -->
      <ng-container matColumnDef="nome">
        <th mat-header-cell *matHeaderCellDef>Nome</th>
        <td mat-cell *matCellDef="let d">{{ d.name }}</td>
      </ng-container>

      <!-- Cognome -->
      <ng-container matColumnDef="cognome">
        <th mat-header-cell *matHeaderCellDef>Cognome</th>
        <td mat-cell *matCellDef="let d">{{ d.lastname }}</td>
      </ng-container>

      <!-- Azioni -->
      <ng-container matColumnDef="azioni">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let d">
          <button mat-icon-button color="primary" (click)="modifica(d)">
            <mat-icon fontIcon="edit"></mat-icon>
          </button>

          <button mat-icon-button class="delete-btn" (click)="elimina(d)">
            <mat-icon fontIcon="delete"></mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell no-result" colspan="4">
          Nessun risultato
          {{ filtro.searchText ? "per la ricerca '" + filtro.searchText + "'" : "" }}
        </td>
      </tr>
    </table>

    <mat-paginator aria-label="Select page of users"></mat-paginator>
  </div>

</div>
